<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.logis_app.Mapper.TransactionMapper">
    <select id="transactionList" resultType="com.example.logis_app.pojo.PageResult.Transaction">
        SELECT transaction_id, transaction_type, item_id, amount, transaction_date, description
        FROM transactions
        ORDER BY transaction_date DESC
        Limit 10 OFFSET 1
    </select>

    <select id="findAllTransactionList" resultType="java.lang.Integer">
        SELECT count(*)
        FROM transactions
    </select>

    <select id="querySpecificTransaction" resultType="com.example.logis_app.pojo.PageResult.Transaction">
        SELECT transaction_id, transaction_type, item_id, amount, transaction_date, description
        FROM transactions
        <where>
            <if test = "transactionType != null and transactionType !=  '' ">
                AND transaction_type LIKE CONCAT(#{transactionType}, '%')
            </if>

            <if test = "itemId != null">
                AND item_id = #{itemId}
            </if>

            <if test = "startDate != null and endDate != null ">
                AND transaction_date BETWEEN #{startDate} AND #{endDate}
            </if>
        </where>
        Limit #{pageLimit} OFFSET #{start}
    </select>


</mapper>